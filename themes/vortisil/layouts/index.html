{{ define "main" }}
{{ $l10n := partial "l10n.html" . }}

<section class="hero" id="hero">

    {{ $hero := resources.GetMatch "/assets/imgs/hero.*" }}
    {{ $heroResize := $hero.Resize "800x webp"}}
    <img src="{{ $heroResize.RelPermalink }}" alt="Hero Image" class="hero-image" loading="lazy">

</section>

<section class="posts" id="posts">
    {{ $posts_pages := where site.RegularPages "Type" "songs" }}

    <div class="posts">
        {{ $pages := where .Site.RegularPages "Type" "songs" }}
        {{ $grouped := $pages.ByTitle }}
        {{ $paginator := .Paginate $grouped }}
        {{ $perPage := $paginator.PagerSize }}
        {{ $offset  := mul (sub $paginator.PageNumber 1) $perPage }}

        <h1>{{ index $l10n "songs" }} ({{ len $pages }})</h1>

        {{ range $i, $p := $paginator.Pages }}
        <div class="posts-item">
            <div class="posts-title">
                <a href="{{ .RelPermalink }}">{{ add $offset (add $i 1) }}. {{ $p.Title }}</a>
                {{ $summary := $p.Content | plainify | truncate 120 "..." }}
                <p>{{ $summary }}</p>
            </div>
        </div>
        {{ end }}

        {{ partial "pagination.html" . }}
    </div>
</section>

{{ end }}